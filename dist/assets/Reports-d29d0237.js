import{o as t,c as l,b as e,h as x,u as n,U as E,i as f,a as m,V as A,T as M,W as N,X as $,n as S,j as k,Y as U,t as d,q as P,r as g,Z as D,F as _,e as y,$ as G,f as w,a0 as Q,a1 as T,a2 as F,a3 as I,p as r,a4 as O,a5 as H,z as W}from"./index-cef76ddd.js";import{_ as X}from"./PageHeader-d9bcbb6b.js";import{_ as Y}from"./Breadcrumbs-cbdce12b.js";import{_ as Z}from"./CategoryPicker-72ff6fdb.js";function J(i,h){return t(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"})])}function ee(i,h){return t(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})])}function te(i,h){return t(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})])}const se={class:"flex items-center justify-center"},le={__name:"EvaluationScore",props:{score:void 0},setup(i){return(h,p)=>(t(),l("div",se,[i.score===void 0||i.score===null?(t(),x(n(E),{key:0,class:"w-6 h-6 text-danger-600"})):(t(),x(n(J),{key:1,class:"w-6 h-6 text-success-600"}))]))}},ae={class:"flex items-center justify-center"},ne={class:"py-1"},oe={key:1},re={__name:"QuizScore",props:{score:void 0},emits:["update-score"],setup(i,{emit:h}){return(p,a)=>(t(),l("div",ae,[i.score===void 0||i.score===null||i.score==="i"||i.score==="n"?(t(),x(n(U),{key:0,as:"div",class:"relative inline-block text-left"},{default:f(()=>[e("div",null,[m(n(A),{class:"flex items-center"},{default:f(()=>[i.score==="i"?(t(),x(n(ee),{key:0,title:"Izin",class:"w-6 h-6 text-blue-600","aria-hidden":"true"})):i.score==="n"?(t(),x(n(te),{key:1,title:"SK Baru",class:"w-6 h-6 text-warning-600","aria-hidden":"true"})):(t(),x(n(E),{key:2,title:"Tidak ada kabar",class:"w-6 h-6 text-danger-600","aria-hidden":"true"}))]),_:1})]),m(M,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:f(()=>[m(n(N),{class:"absolute right-0 z-10 w-40 mt-2 origin-top-right bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:f(()=>[e("div",ne,[i.score!==void 0&&i.score!==null?(t(),x(n($),{key:0},{default:f(({active:v})=>[e("button",{onClick:a[0]||(a[0]=()=>h("update-score",null)),class:S([v?"bg-gray-100 text-gray-900":"text-gray-700","block w-full text-left px-4 py-2 text-sm"])},"Tidak ada kabar",2)]),_:1})):k("",!0),i.score!="i"?(t(),x(n($),{key:1},{default:f(({active:v})=>[e("button",{onClick:a[1]||(a[1]=()=>h("update-score","i")),class:S([v?"bg-gray-100 text-gray-900":"text-gray-700","block w-full text-left px-4 py-2 text-sm"])},"Izin",2)]),_:1})):k("",!0),i.score!="n"?(t(),x(n($),{key:2,onClick:a[2]||(a[2]=()=>h("update-score","n"))},{default:f(({active:v})=>[e("button",{class:S([v?"bg-gray-100 text-gray-900":"text-gray-700","block w-full text-left px-4 py-2 text-sm"])},"SK Baru",2)]),_:1})):k("",!0)])]),_:1})]),_:1})]),_:1})):(t(),l("span",oe,d(i.score),1))]))}},ie={class:"mb-4 sm:flex"},ue={key:0},ce={key:0,class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},de={class:"min-w-full divide-y divide-gray-300"},me={class:"bg-gray-50"},fe=e("th",{class:"py-3.5 pl-4 text-left text-sm font-semibold text-gray-900 sm:pl-6"},"#",-1),pe=e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Nama Peserta",-1),_e={class:"bg-white divide-y divide-gray-200"},ye={class:"py-4 pl-4 whitespace-nowrap sm:pl-6"},xe={class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap"},he={class:"text-xs text-gray-500"},ve={class:"text-sm font-medium text-gray-900"},be={class:"bg-gray-50"},ge=e("th",{class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},null,-1),we=e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},null,-1),ke={key:1,class:"flex justify-end mt-4"},ze=e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"},null,-1),$e={class:"fixed inset-0 z-10 overflow-y-auto"},Se={class:"flex items-end justify-center min-h-full p-4 text-center sm:items-center sm:p-0"},je={class:"mt-3 sm:mt-5"},Ce=e("br",null,null,-1),Te=e("br",null,null,-1),Ee=e("br",null,null,-1),Ke=e("br",null,null,-1),Le=e("br",null,null,-1),Be=e("br",null,null,-1),Re=e("br",null,null,-1),Ve=e("br",null,null,-1),qe=e("br",null,null,-1),Ae=e("br",null,null,-1),Me=e("br",null,null,-1),Ne=e("br",null,null,-1),Ue=e("br",null,null,-1),Pe=e("br",null,null,-1),De=e("br",null,null,-1),Ge=e("br",null,null,-1),Qe=e("br",null,null,-1),Fe=e("br",null,null,-1),Ie=e("br",null,null,-1),Oe=e("br",null,null,-1),He=e("br",null,null,-1),We=e("br",null,null,-1),Xe={class:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3"},tt={__name:"Reports",setup(i){P();const h=g([{name:"Rapor",route:"/reports",current:!0}]),p=g(),a=g(),v=g({}),z=g(!1);async function j(){if(p.value){const o=await G(p.value?p.value.id:null);a.value=o.data,L(),console.log(o)}}j();const K=async(o,u,s)=>{await H({user_id:o,category_id:p.value.id,scores:{[u]:s}});const b=a.value.items;b.forEach(c=>{c.id==o&&(c.scores={...c.scores,[u]:s})}),a.value={...a.value,items:[...b]}},L=()=>{let o={};a.value&&(a.value.quizzes.forEach(u=>{o[`quiz_${u.id}`]=0}),a.value.items.forEach(u=>{Object.keys(o).forEach(s=>{u.scores!=null&&u.scores[s]==100&&o[s]++})})),v.value=o},B=o=>o==null?"✖️ ":o=="i"?"ℹ️ ":o=="n"?"🆕 ":o==100?"💯 ":o+" ",R=o=>o==null?"✖️":"🎓",C=g(),V=()=>{navigator.clipboard.writeText(C.value.innerText)};return(o,u)=>(t(),l("div",null,[m(Y,{class:"mb-4",pages:h.value},null,8,["pages"]),m(X,{class:"mb-8","page-title":"Rapor"}),e("div",ie,[m(D,{class:"w-full sm:w-64",label:"Grup"},{default:f(()=>[n(w).user&&n(w).user.group?(t(),l("p",ue,d(n(w).user.group.name),1)):(t(),x(W,{key:1,class:"block w-32"}))]),_:1}),m(Z,{"root-only":"",class:"w-full ml-auto sm:w-56",modelValue:p.value,"onUpdate:modelValue":[u[0]||(u[0]=s=>p.value=s),j]},null,8,["modelValue"])]),a.value?(t(),l("div",ce,[e("table",de,[e("thead",me,[e("tr",null,[fe,pe,(t(!0),l(_,null,y(a.value.quizzes,(s,b)=>(t(),l("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:s.id},"Kuis "+d(b+1),1))),128)),(t(!0),l(_,null,y(a.value.evaluations,s=>(t(),l("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:s.id},"Evaluasi"))),128))])]),e("tbody",_e,[(t(!0),l(_,null,y(a.value.items,(s,b)=>(t(),l("tr",null,[e("td",ye,d(b+1),1),e("td",xe,[e("p",he,d(s.username),1),e("p",ve,d(s.name),1)]),(t(!0),l(_,null,y(a.value.quizzes,c=>(t(),l("td",{class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",key:c.id},[m(re,{score:s.scores?s.scores[`quiz_${c.id}`]:void 0,onUpdateScore:q=>K(s.id,`quiz_${c.id}`,q)},null,8,["score","onUpdateScore"])]))),128)),(t(!0),l(_,null,y(a.value.evaluations,c=>(t(),l("td",{class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",key:c.id},[m(le,{score:s.scores?s.scores[`evaluation_${c.id}`]:void 0},null,8,["score"])]))),128))]))),256))]),e("tfoot",be,[e("tr",null,[ge,we,(t(!0),l(_,null,y(a.value.quizzes,s=>(t(),l("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:s.id},d(v.value[`quiz_${s.id}`]),1))),128)),(t(!0),l(_,null,y(a.value.evaluations,s=>(t(),l("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:s.id}))),128))])])])])):k("",!0),a.value?(t(),l("div",ke,[e("button",{onClick:u[1]||(u[1]=s=>z.value=!0),type:"button",class:"px-3 py-2 text-sm font-semibold text-white rounded-md shadow-sm bg-lime-600 hover:bg-lime-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-lime-600"},"Bagikan")])):k("",!0),m(n(O),{as:"template",show:z.value},{default:f(()=>[m(n(Q),{as:"div",class:"relative z-50",onClose:u[3]||(u[3]=s=>z.value=!1)},{default:f(()=>[m(n(T),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:f(()=>[ze]),_:1}),e("div",$e,[e("div",Se,[m(n(T),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:f(()=>[m(n(F),{class:"relative px-4 pt-5 pb-4 overflow-hidden text-left transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:w-full sm:max-w-sm sm:p-6"},{default:f(()=>[e("div",null,[e("div",je,[m(n(I),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:f(()=>[r("Rekap KontaQ ")]),_:1}),e("div",{class:"mt-2 text-sm",ref_key:"shareContent",ref:C},[r(" REKAP KONTAQ GRUP "+d(n(w).user?n(w).user.group.name:"-"),1),Ce,r(" 📡 "+d(p.value?p.value.name:"-"),1),Te,r(" ➖➖➖➖➖➖➖➖"),Ee,r(" Admin : "+d(a.value.items[0].name),1),Ke,r(" Asmin : "+d(a.value.items[1].name),1),Le,Be,r(" 📋 Kuis wajib dikerjakan"),Re,Ve,r(" 🆔 1️⃣ 2️⃣ 3️⃣ 4️⃣ 5️⃣ 6️⃣ "),qe,Ae,(t(!0),l(_,null,y(a.value.items,(s,b)=>(t(),l("span",null,[r(d(`${b+1}`.padStart(2,"0"))+" ",1),(t(!0),l(_,null,y(a.value.quizzes,c=>(t(),l("span",{class:"text-red-600",key:c.id},d(B(s.scores?s.scores[`quiz_${c.id}`]:void 0)),1))),128)),(t(!0),l(_,null,y(a.value.evaluations,c=>(t(),l("span",{key:c.id},d(R(s.scores?s.scores[`evaluation_${c.id}`]:void 0)),1))),128)),r(" "+d(s.name)+" ",1),Me]))),256)),r(" 💯 "+d(a.value.quizzes.map(s=>v.value[`quiz_${s.id}`]).join("-")),1),Ne,Ue,r(" ➖➖➖➖➖➖➖➖➖"),Pe,De,r(" 📝 Keterangan :"),Ge,r(" 💯 = Kholas tadabbur harian"),Qe,r(" 🎓 = Kholas Evaluasi"),Fe,r(" ✖️ = Tidak ada kabar"),Ie,r(" ℹ️ = Izin / Sakit"),Oe,r(" 🏆 = Peringkat 10 besar"),He,r(" 🆕 = SK baru bergabung"),We],512)])]),e("div",Xe,[e("button",{type:"button",class:"inline-flex justify-center w-full px-3 py-2 text-sm font-semibold text-white rounded-md shadow-sm bg-lime-600 hover:bg-lime-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-lime-600 sm:col-start-2",onClick:u[2]||(u[2]=s=>z.value=!1)},"Tutup"),e("button",{type:"button",class:"inline-flex justify-center w-full px-3 py-2 mt-3 text-sm font-semibold text-gray-900 bg-white rounded-md shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0",onClick:V},"Salin")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}};export{tt as default};
