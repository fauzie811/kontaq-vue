import{X as F,r as k,Y as b,aA as oe,aB as ne,aC as h,a8 as C,ak as ie,aD as se,aE as ue,a6 as m,ac as re,aq as de,Z as q,a5 as ee,a0 as G,aF as ve,a1 as pe,aG as ce,a2 as fe,a3 as K,ar as be,F as ae,ah as Q,aH as me,ai as xe,al as J,aI as ge,$ as he,W as ye,aJ as Oe,ad as we,aK as Se,aL as R,an as c,am as M,ao as _,o as P,c as A,b as D,h as H,i as N,a as z,t as X,u as B,n as E,j as $,e as ke,aM as Re,T as Le,aN as Pe}from"./index-507ca392.js";function Te(a,v){return a===v}var Ve=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(Ve||{}),Be=(a=>(a[a.Single=0]="Single",a[a.Multi=1]="Multi",a))(Be||{}),De=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(De||{});function Ce(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let te=Symbol("ListboxContext");function U(a){let v=we(te,null);if(v===null){let y=new Error(`<${a} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(y,U),y}return v}let Ie=F({name:"Listbox",emits:{"update:modelValue":a=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Te},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(a,{slots:v,attrs:y,emit:L}){let e=k(1),p=k(null),f=k(null),u=k(null),d=k([]),t=k(""),l=k(null),O=k(1);function w(o=n=>n){let n=l.value!==null?d.value[l.value]:null,i=Se(o(d.value.slice()),g=>m(g.dataRef.domRef)),r=n?i.indexOf(n):null;return r===-1&&(r=null),{options:i,activeOptionIndex:r}}let S=b(()=>a.multiple?1:0),[T,I]=oe(b(()=>a.modelValue),o=>L("update:modelValue",o),b(()=>a.defaultValue)),V=b(()=>T.value===void 0?C(S.value,{1:[],0:void 0}):T.value),s={listboxState:e,value:V,mode:S,compare(o,n){if(typeof a.by=="string"){let i=a.by;return(o==null?void 0:o[i])===(n==null?void 0:n[i])}return a.by(o,n)},orientation:b(()=>a.horizontal?"horizontal":"vertical"),labelRef:p,buttonRef:f,optionsRef:u,disabled:b(()=>a.disabled),options:d,searchQuery:t,activeOptionIndex:l,activationTrigger:O,closeListbox(){a.disabled||e.value!==1&&(e.value=1,l.value=null)},openListbox(){a.disabled||e.value!==0&&(e.value=0)},goToOption(o,n,i){if(a.disabled||e.value===1)return;let r=w(),g=ne(o===h.Specific?{focus:h.Specific,id:n}:{focus:o},{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:j=>j.id,resolveDisabled:j=>j.dataRef.disabled});t.value="",l.value=g,O.value=i??1,d.value=r.options},search(o){if(a.disabled||e.value===1)return;let n=t.value!==""?0:1;t.value+=o.toLowerCase();let i=(l.value!==null?d.value.slice(l.value+n).concat(d.value.slice(0,l.value+n)):d.value).find(g=>g.dataRef.textValue.startsWith(t.value)&&!g.dataRef.disabled),r=i?d.value.indexOf(i):-1;r===-1||r===l.value||(l.value=r,O.value=1)},clearSearch(){a.disabled||e.value!==1&&t.value!==""&&(t.value="")},registerOption(o,n){let i=w(r=>[...r,{id:o,dataRef:n}]);d.value=i.options,l.value=i.activeOptionIndex},unregisterOption(o){let n=w(i=>{let r=i.findIndex(g=>g.id===o);return r!==-1&&i.splice(r,1),i});d.value=n.options,l.value=n.activeOptionIndex,O.value=1},theirOnChange(o){a.disabled||I(o)},select(o){a.disabled||I(C(S.value,{0:()=>o,1:()=>{let n=R(s.value.value).slice(),i=R(o),r=n.findIndex(g=>s.compare(i,R(g)));return r===-1?n.push(i):n.splice(r,1),n}}))}};ie([f,u],(o,n)=>{var i;s.closeListbox(),se(n,ue.Loose)||(o.preventDefault(),(i=m(f))==null||i.focus())},b(()=>e.value===0)),re(te,s),de(b(()=>C(e.value,{0:_.Open,1:_.Closed})));let x=b(()=>{var o;return(o=m(f))==null?void 0:o.closest("form")});return q(()=>{ee([x],()=>{if(!x.value||a.defaultValue===void 0)return;function o(){s.theirOnChange(a.defaultValue)}return x.value.addEventListener("reset",o),()=>{var n;(n=x.value)==null||n.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,modelValue:n,disabled:i,form:r,...g}=a,j={open:e.value===0,disabled:i,value:V.value};return G(ae,[...o!=null&&V.value!=null?ve({[o]:V.value}).map(([W,le])=>G(pe,ce({features:fe.Hidden,key:W,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:r,name:W,value:le}))):[],K({ourProps:{},theirProps:{...y,...be(g,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:j,slots:v,attrs:y,name:"Listbox"})])}}}),Ae=F({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${Q()}`}},setup(a,{attrs:v,slots:y,expose:L}){let e=U("ListboxButton");L({el:e.buttonRef,$el:e.buttonRef});function p(t){switch(t.key){case c.Space:case c.Enter:case c.ArrowDown:t.preventDefault(),e.openListbox(),M(()=>{var l;(l=m(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(h.First)});break;case c.ArrowUp:t.preventDefault(),e.openListbox(),M(()=>{var l;(l=m(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(h.Last)});break}}function f(t){switch(t.key){case c.Space:t.preventDefault();break}}function u(t){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),M(()=>{var l;return(l=m(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})})):(t.preventDefault(),e.openListbox(),Ce(()=>{var l;return(l=m(e.optionsRef))==null?void 0:l.focus({preventScroll:!0})})))}let d=me(b(()=>({as:a.as,type:v.type})),e.buttonRef);return()=>{var t,l;let O={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:w,...S}=a,T={ref:e.buttonRef,id:w,type:d.value,"aria-haspopup":"listbox","aria-controls":(t=m(e.optionsRef))==null?void 0:t.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(l=m(e.labelRef))==null?void 0:l.id,w].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:p,onKeyup:f,onClick:u};return K({ourProps:T,theirProps:S,slot:O,attrs:v,slots:y,name:"ListboxButton"})}}}),Me=F({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${Q()}`}},setup(a,{attrs:v,slots:y,expose:L}){let e=U("ListboxOptions"),p=k(null);L({el:e.optionsRef,$el:e.optionsRef});function f(t){switch(p.value&&clearTimeout(p.value),t.key){case c.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case c.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeOptionIndex.value!==null){let l=e.options.value[e.activeOptionIndex.value];e.select(l.dataRef.value)}e.mode.value===0&&(e.closeListbox(),M(()=>{var l;return(l=m(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})}));break;case C(e.orientation.value,{vertical:c.ArrowDown,horizontal:c.ArrowRight}):return t.preventDefault(),t.stopPropagation(),e.goToOption(h.Next);case C(e.orientation.value,{vertical:c.ArrowUp,horizontal:c.ArrowLeft}):return t.preventDefault(),t.stopPropagation(),e.goToOption(h.Previous);case c.Home:case c.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToOption(h.First);case c.End:case c.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToOption(h.Last);case c.Escape:t.preventDefault(),t.stopPropagation(),e.closeListbox(),M(()=>{var l;return(l=m(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case c.Tab:t.preventDefault(),t.stopPropagation();break;default:t.key.length===1&&(e.search(t.key),p.value=setTimeout(()=>e.clearSearch(),350));break}}let u=xe(),d=b(()=>u!==null?(u.value&_.Open)===_.Open:e.listboxState.value===0);return()=>{var t,l,O,w;let S={open:e.listboxState.value===0},{id:T,...I}=a,V={"aria-activedescendant":e.activeOptionIndex.value===null||(t=e.options.value[e.activeOptionIndex.value])==null?void 0:t.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(w=(l=m(e.labelRef))==null?void 0:l.id)!=null?w:(O=m(e.buttonRef))==null?void 0:O.id,"aria-orientation":e.orientation.value,id:T,onKeydown:f,role:"listbox",tabIndex:0,ref:e.optionsRef};return K({ourProps:V,theirProps:I,slot:S,attrs:v,slots:y,features:J.RenderStrategy|J.Static,visible:d.value,name:"ListboxOptions"})}}}),Y=F({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${Q()}`}},setup(a,{slots:v,attrs:y,expose:L}){let e=U("ListboxOption"),p=k(null);L({el:p,$el:p});let f=b(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===a.id:!1),u=b(()=>C(e.mode.value,{0:()=>e.compare(R(e.value.value),R(a.value)),1:()=>R(e.value.value).some(s=>e.compare(R(s),R(a.value)))})),d=b(()=>C(e.mode.value,{1:()=>{var s;let x=R(e.value.value);return((s=e.options.value.find(o=>x.some(n=>e.compare(R(n),R(o.dataRef.value)))))==null?void 0:s.id)===a.id},0:()=>u.value})),t=ge(p),l=b(()=>({disabled:a.disabled,value:a.value,get textValue(){return t()},domRef:p}));q(()=>e.registerOption(a.id,l)),he(()=>e.unregisterOption(a.id)),q(()=>{ee([e.listboxState,u],()=>{e.listboxState.value===0&&u.value&&C(e.mode.value,{1:()=>{d.value&&e.goToOption(h.Specific,a.id)},0:()=>{e.goToOption(h.Specific,a.id)}})},{immediate:!0})}),ye(()=>{e.listboxState.value===0&&f.value&&e.activationTrigger.value!==0&&M(()=>{var s,x;return(x=(s=m(p))==null?void 0:s.scrollIntoView)==null?void 0:x.call(s,{block:"nearest"})})});function O(s){if(a.disabled)return s.preventDefault();e.select(a.value),e.mode.value===0&&(e.closeListbox(),M(()=>{var x;return(x=m(e.buttonRef))==null?void 0:x.focus({preventScroll:!0})}))}function w(){if(a.disabled)return e.goToOption(h.Nothing);e.goToOption(h.Specific,a.id)}let S=Oe();function T(s){S.update(s)}function I(s){S.wasMoved(s)&&(a.disabled||f.value||e.goToOption(h.Specific,a.id,0))}function V(s){S.wasMoved(s)&&(a.disabled||f.value&&e.goToOption(h.Nothing))}return()=>{let{disabled:s}=a,x={active:f.value,selected:u.value,disabled:s},{id:o,value:n,disabled:i,...r}=a,g={id:o,ref:p,role:"option",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-selected":u.value,disabled:void 0,onClick:O,onFocus:w,onPointerenter:T,onMouseenter:T,onPointermove:I,onMousemove:I,onPointerleave:V,onMouseleave:V};return K({ourProps:g,theirProps:r,slot:x,attrs:y,slots:v,name:"ListboxOption"})}}});function Z(a,v){return P(),A("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[D("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})])}function Ne(a,v){return P(),A("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[D("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])}const ze={class:"relative mt-2"},Ee={key:0,class:"block truncate"},je={key:1,class:"block text-gray-500 truncate"},_e={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},Ke={__name:"CategoryPicker",props:{modelValue:Object,rootOnly:Boolean,showAllOption:Boolean},emits:["update:modelValue"],setup(a,{emit:v}){const y=a,L=k([]);return(async()=>{const p=await Pe(y.rootOnly);L.value=p.data})(),(p,f)=>(P(),H(B(Ie),{as:"div",modelValue:a.modelValue,"onUpdate:modelValue":f[0]||(f[0]=u=>v("update:modelValue",u)),by:"id"},{default:N(()=>[D("div",ze,[z(B(Ae),{class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-lime-600 sm:text-sm sm:leading-6"},{default:N(()=>[a.modelValue||a.showAllOption?(P(),A("span",Ee,X(a.modelValue?a.modelValue.name:"Semua Kategori"),1)):(P(),A("span",je,"Pilih Kategori")),D("span",_e,[z(B(Ne),{class:"w-5 h-5 text-gray-400","aria-hidden":"true"})])]),_:1}),z(Le,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:N(()=>[z(B(Me),{class:"absolute z-10 w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:N(()=>[a.showAllOption?(P(),H(B(Y),{key:0,as:"template",value:null},{default:N(({active:u,selected:d})=>[D("li",{class:E([u?"bg-lime-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[D("span",{class:E([d?"font-semibold":"font-normal","block truncate"])},"Semua Kategori",2),d?(P(),A("span",{key:0,class:E([u?"text-white":"text-lime-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[z(B(Z),{class:"w-5 h-5","aria-hidden":"true"})],2)):$("",!0)],2)]),_:1})):$("",!0),(P(!0),A(ae,null,ke(L.value,u=>(P(),H(B(Y),{as:"template",key:u.id,value:u},{default:N(({active:d,selected:t})=>[D("li",{class:E([d?"bg-lime-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[D("span",{class:E([t?"font-semibold":"font-normal","block truncate"]),style:Re("padding-left: "+.75*u.depth+"rem;")},X(u.name),7),t?(P(),A("span",{key:0,class:E([d?"text-white":"text-lime-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[z(B(Z),{class:"w-5 h-5","aria-hidden":"true"})],2)):$("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}};export{Ie as B,Me as H,Ae as N,Y as U,Ke as _,Z as a,Ne as r};
