import{b as P}from"./vue-router-CDk-xkD6.js";import{w as D,g as z,T as U,x as F}from"./index-D8O8KXoR.js";import{_ as I}from"./PageHeader-DHqEJvXM.js";import{_ as M}from"./Breadcrumbs-D30_HYsy.js";import{_ as O}from"./CategoryPicker-DK3ccVLG.js";import{v as n,x as s,y as e,D as Q,R as d,A as v,u as a,B as y,G as f,ac as L,L as S,q as T,r as $,F as g,M as b,O as i}from"./@vue-CmeWuSD3.js";import{d as R,e as Y,f as H,g as J}from"./@heroicons-BoQYUCLx.js";import{S as W,M as X,b as j,g as Z,a as h,Y as _,c as K,G as tt,V as et}from"./@headlessui-0xYe8XqW.js";import"./axios-DW_MHI2K.js";import"./vee-validate-Bj-Mx_ql.js";import"./@vee-validate-Dp5Eofi2.js";import"./zod-CAEFwTIS.js";import"./vue-sonner-D4V0y7TK.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-n5GtVHHT.js";import"./radix-vue-CtCK4Iz_.js";import"./@floating-ui-CN3CcqHw.js";import"./class-variance-authority-Dp3B9jqt.js";import"./@vueuse-CrFSdR1N.js";import"./lucide-vue-next-CAHwnPek.js";import"./@radix-icons-D7BaxYRN.js";import"./sweetalert2-CumHaNCI.js";import"./date-fns-BFy15OHH.js";import"./@babel-QjJsDpFa.js";const st={class:"bg-white rounded-md px-3 pb-1.5 pt-2.5 shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-lime-600"},lt={class:"block text-xs font-medium text-gray-500"},nt={__name:"InputFrame",props:{label:String},setup(u){return(k,p)=>(s(),n("div",st,[e("label",lt,d(u.label),1),Q(k.$slots,"default")]))}},rt={class:"flex items-center justify-center"},at={__name:"EvaluationScore",props:{score:void 0},setup(u){return(k,p)=>(s(),n("div",rt,[u.score===void 0||u.score===null?(s(),v(a(R),{key:0,class:"w-6 h-6 text-danger-600"})):(s(),v(a(Y),{key:1,class:"w-6 h-6 text-success-600"}))]))}},ot={class:"flex items-center justify-center"},it={class:"py-1"},ut={key:1},dt={__name:"QuizScore",props:{score:void 0},emits:["update-score"],setup(u,{emit:k}){const p=k;return(r,x)=>(s(),n("div",ot,[u.score===void 0||u.score===null||u.score==="i"||u.score==="n"?(s(),v(a(Z),{key:0,as:"div",class:"relative inline-block text-left"},{default:y(()=>[e("div",null,[f(a(W),{class:"flex items-center"},{default:y(()=>[u.score==="i"?(s(),v(a(H),{key:0,title:"Izin",class:"w-6 h-6 text-blue-600","aria-hidden":"true"})):u.score==="n"?(s(),v(a(J),{key:1,title:"SK Baru",class:"w-6 h-6 text-warning-600","aria-hidden":"true"})):(s(),v(a(R),{key:2,title:"Tidak ada kabar",class:"w-6 h-6 text-danger-600","aria-hidden":"true"}))]),_:1})]),f(L,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:y(()=>[f(a(X),{class:"absolute right-0 z-10 w-40 mt-2 origin-top-right bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:y(()=>[e("div",it,[u.score!==void 0&&u.score!==null?(s(),v(a(j),{key:0},{default:y(({active:c})=>[e("button",{onClick:x[0]||(x[0]=()=>p("update-score",null)),class:T([c?"bg-gray-100 text-gray-900":"text-gray-700","block w-full text-left px-4 py-2 text-sm"])},"Tidak ada kabar",2)]),_:1})):S("",!0),u.score!="i"?(s(),v(a(j),{key:1},{default:y(({active:c})=>[e("button",{onClick:x[1]||(x[1]=()=>p("update-score","i")),class:T([c?"bg-gray-100 text-gray-900":"text-gray-700","block w-full text-left px-4 py-2 text-sm"])},"Izin",2)]),_:1})):S("",!0),u.score!="n"?(s(),v(a(j),{key:2,onClick:x[2]||(x[2]=()=>p("update-score","n"))},{default:y(({active:c})=>[e("button",{class:T([c?"bg-gray-100 text-gray-900":"text-gray-700","block w-full text-left px-4 py-2 text-sm"])},"SK Baru",2)]),_:1})):S("",!0)])]),_:1})]),_:1})]),_:1})):(s(),n("span",ut,d(u.score),1))]))}},mt={class:"mb-4 sm:flex"},ft={key:0},pt={key:0,class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},yt={class:"min-w-full divide-y divide-gray-300"},xt={class:"bg-gray-50"},gt={class:"bg-white divide-y divide-gray-200"},bt={class:"py-4 pl-4 whitespace-nowrap sm:pl-6"},vt={class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap"},ct={class:"text-xs text-gray-500"},wt={class:"text-sm font-medium text-gray-900"},kt={class:"bg-gray-50"},$t={class:"fixed inset-0 z-10 overflow-y-auto"},zt={class:"flex items-end justify-center min-h-full p-4 text-center sm:items-center sm:p-0"},St={class:"mt-3 sm:mt-5"},Tt={class:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3"},Xt={__name:"Reports",setup(u){P();const k=$([{name:"Rapor",route:"/reports",current:!0}]),p=$(),r=$(),x=$({}),c=$(!1);async function C(){if(p.value){const o=await D(p.value?p.value.id:null);r.value=o.data,V(),console.log(o)}}C();const q=async(o,t,l)=>{await F({user_id:o,category_id:p.value.id,scores:{[t]:l}});const w=r.value.items;w.forEach(m=>{m.id==o&&(m.scores={...m.scores,[t]:l})}),r.value={...r.value,items:[...w]}},V=()=>{let o={};r.value&&(r.value.quizzes.forEach(t=>{o[`quiz_${t.id}`]=0}),r.value.items.forEach(t=>{Object.keys(o).forEach(l=>{t.scores!=null&&t.scores[l]==100&&o[l]++})})),x.value=o},B=o=>o==null?"✖️ ":o=="i"?"ℹ️ ":o=="n"?"🆕 ":o==100?"💯 ":o+" ",N=o=>o==null?"✖️":"🎓",E=$(),A=()=>{navigator.clipboard.writeText(E.value.innerText)};return(o,t)=>(s(),n("div",null,[f(M,{class:"mb-4",pages:k.value},null,8,["pages"]),f(I,{class:"mb-8","page-title":"Rapor"}),e("div",mt,[f(nt,{class:"w-full sm:w-64",label:"Grup"},{default:y(()=>[a(z).user&&a(z).user.group?(s(),n("p",ft,d(a(z).user.group.name),1)):(s(),v(U,{key:1,class:"block w-32"}))]),_:1}),f(O,{"root-only":"",class:"w-full ml-auto sm:w-56",modelValue:p.value,"onUpdate:modelValue":[t[0]||(t[0]=l=>p.value=l),C]},null,8,["modelValue"])]),r.value?(s(),n("div",pt,[e("table",yt,[e("thead",xt,[e("tr",null,[t[3]||(t[3]=e("th",{class:"py-3.5 pl-4 text-left text-sm font-semibold text-gray-900 sm:pl-6"},"#",-1)),t[4]||(t[4]=e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Nama Peserta",-1)),(s(!0),n(g,null,b(r.value.quizzes,(l,w)=>(s(),n("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:l.id},"Kuis "+d(w+1),1))),128)),(s(!0),n(g,null,b(r.value.evaluations,l=>(s(),n("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:l.id},"Evaluasi"))),128))])]),e("tbody",gt,[(s(!0),n(g,null,b(r.value.items,(l,w)=>(s(),n("tr",null,[e("td",bt,d(w+1),1),e("td",vt,[e("p",ct,d(l.username),1),e("p",wt,d(l.name),1)]),(s(!0),n(g,null,b(r.value.quizzes,m=>(s(),n("td",{class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",key:m.id},[f(dt,{score:l.scores?l.scores[`quiz_${m.id}`]:void 0,onUpdateScore:G=>q(l.id,`quiz_${m.id}`,G)},null,8,["score","onUpdateScore"])]))),128)),(s(!0),n(g,null,b(r.value.evaluations,m=>(s(),n("td",{class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",key:m.id},[f(at,{score:l.scores?l.scores[`evaluation_${m.id}`]:void 0},null,8,["score"])]))),128))]))),256))]),e("tfoot",kt,[e("tr",null,[t[5]||(t[5]=e("th",{class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},null,-1)),t[6]||(t[6]=e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},null,-1)),(s(!0),n(g,null,b(r.value.quizzes,l=>(s(),n("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:l.id},d(x.value[`quiz_${l.id}`]),1))),128)),(s(!0),n(g,null,b(r.value.evaluations,l=>(s(),n("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:l.id}))),128))])])])])):S("",!0),f(a(h),{as:"template",show:c.value},{default:y(()=>[f(a(_),{as:"div",class:"relative z-50",onClose:t[2]||(t[2]=l=>c.value=!1)},{default:y(()=>[f(a(K),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:y(()=>t[7]||(t[7]=[e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"},null,-1)])),_:1}),e("div",$t,[e("div",zt,[f(a(K),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:y(()=>[f(a(tt),{class:"relative px-4 pt-5 pb-4 overflow-hidden text-left transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:w-full sm:max-w-sm sm:p-6"},{default:y(()=>[e("div",null,[e("div",St,[f(a(et),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:y(()=>t[8]||(t[8]=[i("Rekap KontaQ ")])),_:1}),e("div",{class:"mt-2 text-sm",ref_key:"shareContent",ref:E},[i(" REKAP KONTAQ GRUP "+d(a(z).user?a(z).user.group.name:"-"),1),t[10]||(t[10]=e("br",null,null,-1)),i(" 📡 "+d(p.value?p.value.name:"-"),1),t[11]||(t[11]=e("br",null,null,-1)),t[12]||(t[12]=i(" ➖➖➖➖➖➖➖➖")),t[13]||(t[13]=e("br",null,null,-1)),i(" Admin : "+d(r.value.items[0].name),1),t[14]||(t[14]=e("br",null,null,-1)),i(" Asmin : "+d(r.value.items[1].name),1),t[15]||(t[15]=e("br",null,null,-1)),t[16]||(t[16]=e("br",null,null,-1)),t[17]||(t[17]=i(" 📋 Kuis wajib dikerjakan")),t[18]||(t[18]=e("br",null,null,-1)),t[19]||(t[19]=e("br",null,null,-1)),t[20]||(t[20]=i(" 🆔 1️⃣ 2️⃣ 3️⃣ 4️⃣ 5️⃣ 6️⃣ ")),t[21]||(t[21]=e("br",null,null,-1)),t[22]||(t[22]=e("br",null,null,-1)),(s(!0),n(g,null,b(r.value.items,(l,w)=>(s(),n("span",null,[i(d(`${w+1}`.padStart(2,"0"))+" ",1),(s(!0),n(g,null,b(r.value.quizzes,m=>(s(),n("span",{class:"text-red-600",key:m.id},d(B(l.scores?l.scores[`quiz_${m.id}`]:void 0)),1))),128)),(s(!0),n(g,null,b(r.value.evaluations,m=>(s(),n("span",{key:m.id},d(N(l.scores?l.scores[`evaluation_${m.id}`]:void 0)),1))),128)),i(" "+d(l.name)+" ",1),t[9]||(t[9]=e("br",null,null,-1))]))),256)),i(" 💯 "+d(r.value.quizzes.map(l=>x.value[`quiz_${l.id}`]).join("-")),1),t[23]||(t[23]=e("br",null,null,-1)),t[24]||(t[24]=e("br",null,null,-1)),t[25]||(t[25]=i(" ➖➖➖➖➖➖➖➖➖")),t[26]||(t[26]=e("br",null,null,-1)),t[27]||(t[27]=e("br",null,null,-1)),t[28]||(t[28]=i(" 📝 Keterangan :")),t[29]||(t[29]=e("br",null,null,-1)),t[30]||(t[30]=i(" 💯 = Kholas tadabbur harian")),t[31]||(t[31]=e("br",null,null,-1)),t[32]||(t[32]=i(" 🎓 = Kholas Evaluasi")),t[33]||(t[33]=e("br",null,null,-1)),t[34]||(t[34]=i(" ✖️ = Tidak ada kabar")),t[35]||(t[35]=e("br",null,null,-1)),t[36]||(t[36]=i(" ℹ️ = Izin / Sakit")),t[37]||(t[37]=e("br",null,null,-1)),t[38]||(t[38]=i(" 🏆 = Peringkat 10 besar")),t[39]||(t[39]=e("br",null,null,-1)),t[40]||(t[40]=i(" 🆕 = SK baru bergabung")),t[41]||(t[41]=e("br",null,null,-1))],512)])]),e("div",Tt,[e("button",{type:"button",class:"inline-flex justify-center w-full px-3 py-2 text-sm font-semibold text-white rounded-md shadow-sm bg-lime-600 hover:bg-lime-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-lime-600 sm:col-start-2",onClick:t[1]||(t[1]=l=>c.value=!1)},"Tutup"),e("button",{type:"button",class:"inline-flex justify-center w-full px-3 py-2 mt-3 text-sm font-semibold text-gray-900 bg-white rounded-md shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0",onClick:A},"Salin")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}};export{Xt as default};
