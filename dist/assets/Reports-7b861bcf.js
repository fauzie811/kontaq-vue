import{o as t,c as a,b as e,h,u as n,U as E,i as f,a as d,V as B,T as M,W as N,X as $,n as S,j as k,Y as U,t as c,q as P,r as b,Z as D,F as p,e as y,$ as G,f as w,a0 as Q,a1 as T,a2 as F,a3 as I,p as r,a4 as O,a5 as H,z as W}from"./index-cae367f7.js";import{_ as X}from"./PageHeader-46ed82b2.js";import{_ as Y}from"./Breadcrumbs-ea717a7e.js";import{_ as Z}from"./CategoryPicker-0abdf50a.js";function J(i,x){return t(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"})])}function ee(i,x){return t(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})])}function te(i,x){return t(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})])}const se={class:"flex items-center justify-center"},ae={__name:"EvaluationScore",props:{score:void 0},setup(i){return(x,_)=>(t(),a("div",se,[i.score===void 0||i.score===null?(t(),h(n(E),{key:0,class:"w-6 h-6 text-danger-600"})):(t(),h(n(J),{key:1,class:"w-6 h-6 text-success-600"}))]))}},le={class:"flex items-center justify-center"},ne={class:"py-1"},oe={key:1},re={__name:"QuizScore",props:{score:void 0},emits:["update-score"],setup(i,{emit:x}){return(_,l)=>(t(),a("div",le,[i.score===void 0||i.score===null||i.score==="i"||i.score==="n"?(t(),h(n(U),{key:0,as:"div",class:"relative inline-block text-left"},{default:f(()=>[e("div",null,[d(n(B),{class:"flex items-center"},{default:f(()=>[i.score==="i"?(t(),h(n(ee),{key:0,title:"Izin",class:"w-6 h-6 text-blue-600","aria-hidden":"true"})):i.score==="n"?(t(),h(n(te),{key:1,title:"SK Baru",class:"w-6 h-6 text-warning-600","aria-hidden":"true"})):(t(),h(n(E),{key:2,title:"Tidak ada kabar",class:"w-6 h-6 text-danger-600","aria-hidden":"true"}))]),_:1})]),d(M,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:f(()=>[d(n(N),{class:"absolute right-0 z-10 w-40 mt-2 origin-top-right bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:f(()=>[e("div",ne,[i.score!==void 0&&i.score!==null?(t(),h(n($),{key:0},{default:f(({active:v})=>[e("button",{onClick:l[0]||(l[0]=()=>x("update-score",null)),class:S([v?"bg-gray-100 text-gray-900":"text-gray-700","block w-full text-left px-4 py-2 text-sm"])},"Tidak ada kabar",2)]),_:1})):k("",!0),i.score!="i"?(t(),h(n($),{key:1},{default:f(({active:v})=>[e("button",{onClick:l[1]||(l[1]=()=>x("update-score","i")),class:S([v?"bg-gray-100 text-gray-900":"text-gray-700","block w-full text-left px-4 py-2 text-sm"])},"Izin",2)]),_:1})):k("",!0),i.score!="n"?(t(),h(n($),{key:2,onClick:l[2]||(l[2]=()=>x("update-score","n"))},{default:f(({active:v})=>[e("button",{class:S([v?"bg-gray-100 text-gray-900":"text-gray-700","block w-full text-left px-4 py-2 text-sm"])},"SK Baru",2)]),_:1})):k("",!0)])]),_:1})]),_:1})]),_:1})):(t(),a("span",oe,c(i.score),1))]))}},ie={class:"mb-4 sm:flex"},ue={key:0},ce={key:0,class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},de={class:"min-w-full divide-y divide-gray-300"},me={class:"bg-gray-50"},fe=e("th",{class:"py-3.5 pl-4 text-left text-sm font-semibold text-gray-900 sm:pl-6"},"#",-1),_e=e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Nama Peserta",-1),pe={class:"bg-white divide-y divide-gray-200"},ye={class:"py-4 pl-4 whitespace-nowrap sm:pl-6"},he={class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap"},xe={class:"text-xs text-gray-500"},ve={class:"text-sm font-medium text-gray-900"},ge={class:"bg-gray-50"},be=e("th",{class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},null,-1),we=e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},null,-1),ke=e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"},null,-1),ze={class:"fixed inset-0 z-10 overflow-y-auto"},$e={class:"flex items-end justify-center min-h-full p-4 text-center sm:items-center sm:p-0"},Se={class:"mt-3 sm:mt-5"},je=e("br",null,null,-1),Ce=e("br",null,null,-1),Te=e("br",null,null,-1),Ee=e("br",null,null,-1),Ke=e("br",null,null,-1),Le=e("br",null,null,-1),Re=e("br",null,null,-1),Ve=e("br",null,null,-1),qe=e("br",null,null,-1),Ae=e("br",null,null,-1),Be=e("br",null,null,-1),Me=e("br",null,null,-1),Ne=e("br",null,null,-1),Ue=e("br",null,null,-1),Pe=e("br",null,null,-1),De=e("br",null,null,-1),Ge=e("br",null,null,-1),Qe=e("br",null,null,-1),Fe=e("br",null,null,-1),Ie=e("br",null,null,-1),Oe=e("br",null,null,-1),He=e("br",null,null,-1),We={class:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3"},et={__name:"Reports",setup(i){P();const x=b([{name:"Rapor",route:"/reports",current:!0}]),_=b(),l=b(),v=b({}),z=b(!1);async function j(){if(_.value){const o=await G(_.value?_.value.id:null);l.value=o.data,L(),console.log(o)}}j();const K=async(o,m,s)=>{await H({user_id:o,category_id:_.value.id,scores:{[m]:s}});const g=l.value.items;g.forEach(u=>{u.id==o&&(u.scores={...u.scores,[m]:s})}),l.value={...l.value,items:[...g]}},L=()=>{let o={};l.value&&(l.value.quizzes.forEach(m=>{o[`quiz_${m.id}`]=0}),l.value.items.forEach(m=>{Object.keys(o).forEach(s=>{m.scores!=null&&m.scores[s]==100&&o[s]++})})),v.value=o},R=o=>o==null?"✖️ ":o=="i"?"ℹ️ ":o=="n"?"🆕 ":o==100?"💯 ":o+" ",V=o=>o==null?"✖️":"🎓",C=b(),q=()=>{navigator.clipboard.writeText(C.value.innerText)};return(o,m)=>(t(),a("div",null,[d(Y,{class:"mb-4",pages:x.value},null,8,["pages"]),d(X,{class:"mb-8","page-title":"Rapor"}),e("div",ie,[d(D,{class:"w-full sm:w-64",label:"Grup"},{default:f(()=>[n(w).user&&n(w).user.group?(t(),a("p",ue,c(n(w).user.group.name),1)):(t(),h(W,{key:1,class:"block w-32"}))]),_:1}),d(Z,{"root-only":"",class:"w-full ml-auto sm:w-56",modelValue:_.value,"onUpdate:modelValue":[m[0]||(m[0]=s=>_.value=s),j]},null,8,["modelValue"])]),l.value?(t(),a("div",ce,[e("table",de,[e("thead",me,[e("tr",null,[fe,_e,(t(!0),a(p,null,y(l.value.quizzes,(s,g)=>(t(),a("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:s.id},"Kuis "+c(g+1),1))),128)),(t(!0),a(p,null,y(l.value.evaluations,s=>(t(),a("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:s.id},"Evaluasi"))),128))])]),e("tbody",pe,[(t(!0),a(p,null,y(l.value.items,(s,g)=>(t(),a("tr",null,[e("td",ye,c(g+1),1),e("td",he,[e("p",xe,c(s.username),1),e("p",ve,c(s.name),1)]),(t(!0),a(p,null,y(l.value.quizzes,u=>(t(),a("td",{class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",key:u.id},[d(re,{score:s.scores?s.scores[`quiz_${u.id}`]:void 0,onUpdateScore:A=>K(s.id,`quiz_${u.id}`,A)},null,8,["score","onUpdateScore"])]))),128)),(t(!0),a(p,null,y(l.value.evaluations,u=>(t(),a("td",{class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap",key:u.id},[d(ae,{score:s.scores?s.scores[`evaluation_${u.id}`]:void 0},null,8,["score"])]))),128))]))),256))]),e("tfoot",ge,[e("tr",null,[be,we,(t(!0),a(p,null,y(l.value.quizzes,s=>(t(),a("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:s.id},c(v.value[`quiz_${s.id}`]),1))),128)),(t(!0),a(p,null,y(l.value.evaluations,s=>(t(),a("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 text-center",key:s.id}))),128))])])])])):k("",!0),d(n(O),{as:"template",show:z.value},{default:f(()=>[d(n(Q),{as:"div",class:"relative z-50",onClose:m[2]||(m[2]=s=>z.value=!1)},{default:f(()=>[d(n(T),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:f(()=>[ke]),_:1}),e("div",ze,[e("div",$e,[d(n(T),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:f(()=>[d(n(F),{class:"relative px-4 pt-5 pb-4 overflow-hidden text-left transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:w-full sm:max-w-sm sm:p-6"},{default:f(()=>[e("div",null,[e("div",Se,[d(n(I),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:f(()=>[r("Rekap KontaQ ")]),_:1}),e("div",{class:"mt-2 text-sm",ref_key:"shareContent",ref:C},[r(" REKAP KONTAQ GRUP "+c(n(w).user?n(w).user.group.name:"-"),1),je,r(" 📡 "+c(_.value?_.value.name:"-"),1),Ce,r(" ➖➖➖➖➖➖➖➖"),Te,r(" Admin : "+c(l.value.items[0].name),1),Ee,r(" Asmin : "+c(l.value.items[1].name),1),Ke,Le,r(" 📋 Kuis wajib dikerjakan"),Re,Ve,r(" 🆔 1️⃣ 2️⃣ 3️⃣ 4️⃣ 5️⃣ 6️⃣ "),qe,Ae,(t(!0),a(p,null,y(l.value.items,(s,g)=>(t(),a("span",null,[r(c(`${g+1}`.padStart(2,"0"))+" ",1),(t(!0),a(p,null,y(l.value.quizzes,u=>(t(),a("span",{class:"text-red-600",key:u.id},c(R(s.scores?s.scores[`quiz_${u.id}`]:void 0)),1))),128)),(t(!0),a(p,null,y(l.value.evaluations,u=>(t(),a("span",{key:u.id},c(V(s.scores?s.scores[`evaluation_${u.id}`]:void 0)),1))),128)),r(" "+c(s.name)+" ",1),Be]))),256)),r(" 💯 "+c(l.value.quizzes.map(s=>v.value[`quiz_${s.id}`]).join("-")),1),Me,Ne,r(" ➖➖➖➖➖➖➖➖➖"),Ue,Pe,r(" 📝 Keterangan :"),De,r(" 💯 = Kholas tadabbur harian"),Ge,r(" 🎓 = Kholas Evaluasi"),Qe,r(" ✖️ = Tidak ada kabar"),Fe,r(" ℹ️ = Izin / Sakit"),Ie,r(" 🏆 = Peringkat 10 besar"),Oe,r(" 🆕 = SK baru bergabung"),He],512)])]),e("div",We,[e("button",{type:"button",class:"inline-flex justify-center w-full px-3 py-2 text-sm font-semibold text-white rounded-md shadow-sm bg-lime-600 hover:bg-lime-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-lime-600 sm:col-start-2",onClick:m[1]||(m[1]=s=>z.value=!1)},"Tutup"),e("button",{type:"button",class:"inline-flex justify-center w-full px-3 py-2 mt-3 text-sm font-semibold text-gray-900 bg-white rounded-md shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0",onClick:q},"Salin")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}};export{et as default};
