import{U as N,ae as Q,av as oe,V as m,a0 as g,$ as U,ak as b,aj as E,aw as h,r as O,af as ne,ag as z,ai as W,a1 as B,ax as w,ay as ie,X as H,Y as ue,a5 as ee,R as se,az as re,ah as de,aA as ve,aB as pe,a9 as ce,ao as fe,Z as X,aC as be,al as me,F as te,aD as xe,aa as ge,aE as he,c as j,o as k,b as T,h as Z,i as M,a as F,u as P,t as Y,T as ye,j as q,n as _,f as Oe,aF as we,aG as Se}from"./index-CjDoOErh.js";import{d as ke,e as Le,f as Re,u as Ve}from"./form-vbyPtqas.js";function De(t,c){return t===c}var Pe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Pe||{}),Te=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Te||{}),Be=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Be||{});function Ce(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let ae=Symbol("ListboxContext");function K(t){let c=ge(ae,null);if(c===null){let y=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(y,K),y}return c}let Ie=N({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>De},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:c,attrs:y,emit:L}){let d=O(1),f=O(null),e=O(null),p=O(null),u=O([]),s=O(""),v=O(null),l=O(1);function n(a=o=>o){let o=v.value!==null?u.value[v.value]:null,i=he(a(u.value.slice()),x=>g(x.dataRef.domRef)),r=o?i.indexOf(o):null;return r===-1&&(r=null),{options:i,activeOptionIndex:r}}let R=m(()=>t.multiple?1:0),[V,S]=ke(m(()=>t.modelValue),a=>L("update:modelValue",a),m(()=>t.defaultValue)),C=m(()=>V.value===void 0?B(R.value,{1:[],0:void 0}):V.value),D={listboxState:d,value:C,mode:R,compare(a,o){if(typeof t.by=="string"){let i=t.by;return(a==null?void 0:a[i])===(o==null?void 0:o[i])}return t.by(a,o)},orientation:m(()=>t.horizontal?"horizontal":"vertical"),labelRef:f,buttonRef:e,optionsRef:p,disabled:m(()=>t.disabled),options:u,searchQuery:s,activeOptionIndex:v,activationTrigger:l,closeListbox(){t.disabled||d.value!==1&&(d.value=1,v.value=null)},openListbox(){t.disabled||d.value!==0&&(d.value=0)},goToOption(a,o,i){if(t.disabled||d.value===1)return;let r=n(),x=xe(a===h.Specific?{focus:h.Specific,id:o}:{focus:a},{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:A=>A.id,resolveDisabled:A=>A.dataRef.disabled});s.value="",v.value=x,l.value=i??1,u.value=r.options},search(a){if(t.disabled||d.value===1)return;let o=s.value!==""?0:1;s.value+=a.toLowerCase();let i=(v.value!==null?u.value.slice(v.value+o).concat(u.value.slice(0,v.value+o)):u.value).find(x=>x.dataRef.textValue.startsWith(s.value)&&!x.dataRef.disabled),r=i?u.value.indexOf(i):-1;r===-1||r===v.value||(v.value=r,l.value=1)},clearSearch(){t.disabled||d.value!==1&&s.value!==""&&(s.value="")},registerOption(a,o){let i=n(r=>[...r,{id:a,dataRef:o}]);u.value=i.options,v.value=i.activeOptionIndex},unregisterOption(a){let o=n(i=>{let r=i.findIndex(x=>x.id===a);return r!==-1&&i.splice(r,1),i});u.value=o.options,v.value=o.activeOptionIndex,l.value=1},theirOnChange(a){t.disabled||S(a)},select(a){t.disabled||S(B(R.value,{0:()=>a,1:()=>{let o=w(D.value.value).slice(),i=w(a),r=o.findIndex(x=>D.compare(i,w(x)));return r===-1?o.push(i):o.splice(r,1),o}}))}};de([e,p],(a,o)=>{var i;D.closeListbox(),ve(o,pe.Loose)||(a.preventDefault(),(i=g(e))==null||i.focus())},m(()=>d.value===0)),ce(ae,D),fe(m(()=>B(d.value,{0:z.Open,1:z.Closed})));let I=m(()=>{var a;return(a=g(e))==null?void 0:a.closest("form")});return H(()=>{ee([I],()=>{if(!I.value||t.defaultValue===void 0)return;function a(){D.theirOnChange(t.defaultValue)}return I.value.addEventListener("reset",a),()=>{var o;(o=I.value)==null||o.removeEventListener("reset",a)}},{immediate:!0})}),()=>{let{name:a,modelValue:o,disabled:i,form:r,...x}=t,A={open:d.value===0,disabled:i,value:C.value};return X(te,[...a!=null&&C.value!=null?Le({[a]:C.value}).map(([G,le])=>X(Re,be({features:Ve.Hidden,key:G,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:r,disabled:i,name:G,value:le}))):[],U({ourProps:{},theirProps:{...y,...me(x,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:A,slots:c,attrs:y,name:"Listbox"})])}}}),Ae=N({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:c,slots:y,expose:L}){var d;let f=(d=t.id)!=null?d:`headlessui-listbox-button-${Q()}`,e=K("ListboxButton");L({el:e.buttonRef,$el:e.buttonRef});function p(l){switch(l.key){case b.Space:case b.Enter:case b.ArrowDown:l.preventDefault(),e.openListbox(),E(()=>{var n;(n=g(e.optionsRef))==null||n.focus({preventScroll:!0}),e.value.value||e.goToOption(h.First)});break;case b.ArrowUp:l.preventDefault(),e.openListbox(),E(()=>{var n;(n=g(e.optionsRef))==null||n.focus({preventScroll:!0}),e.value.value||e.goToOption(h.Last)});break}}function u(l){switch(l.key){case b.Space:l.preventDefault();break}}function s(l){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),E(()=>{var n;return(n=g(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})})):(l.preventDefault(),e.openListbox(),Ce(()=>{var n;return(n=g(e.optionsRef))==null?void 0:n.focus({preventScroll:!0})})))}let v=oe(m(()=>({as:t.as,type:c.type})),e.buttonRef);return()=>{var l,n;let R={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{...V}=t,S={ref:e.buttonRef,id:f,type:v.value,"aria-haspopup":"listbox","aria-controls":(l=g(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(n=g(e.labelRef))==null?void 0:n.id,f].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:p,onKeyup:u,onClick:s};return U({ourProps:S,theirProps:V,slot:R,attrs:c,slots:y,name:"ListboxButton"})}}}),je=N({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:c,slots:y,expose:L}){var d;let f=(d=t.id)!=null?d:`headlessui-listbox-options-${Q()}`,e=K("ListboxOptions"),p=O(null);L({el:e.optionsRef,$el:e.optionsRef});function u(l){switch(p.value&&clearTimeout(p.value),l.key){case b.Space:if(e.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),e.search(l.key);case b.Enter:if(l.preventDefault(),l.stopPropagation(),e.activeOptionIndex.value!==null){let n=e.options.value[e.activeOptionIndex.value];e.select(n.dataRef.value)}e.mode.value===0&&(e.closeListbox(),E(()=>{var n;return(n=g(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})}));break;case B(e.orientation.value,{vertical:b.ArrowDown,horizontal:b.ArrowRight}):return l.preventDefault(),l.stopPropagation(),e.goToOption(h.Next);case B(e.orientation.value,{vertical:b.ArrowUp,horizontal:b.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),e.goToOption(h.Previous);case b.Home:case b.PageUp:return l.preventDefault(),l.stopPropagation(),e.goToOption(h.First);case b.End:case b.PageDown:return l.preventDefault(),l.stopPropagation(),e.goToOption(h.Last);case b.Escape:l.preventDefault(),l.stopPropagation(),e.closeListbox(),E(()=>{var n;return(n=g(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})});break;case b.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(e.search(l.key),p.value=setTimeout(()=>e.clearSearch(),350));break}}let s=ne(),v=m(()=>s!==null?(s.value&z.Open)===z.Open:e.listboxState.value===0);return()=>{var l,n;let R={open:e.listboxState.value===0},{...V}=t,S={"aria-activedescendant":e.activeOptionIndex.value===null||(l=e.options.value[e.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(n=g(e.buttonRef))==null?void 0:n.id,"aria-orientation":e.orientation.value,id:f,onKeydown:u,role:"listbox",tabIndex:0,ref:e.optionsRef};return U({ourProps:S,theirProps:V,slot:R,attrs:c,slots:y,features:W.RenderStrategy|W.Static,visible:v.value,name:"ListboxOptions"})}}}),J=N({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:c,attrs:y,expose:L}){var d;let f=(d=t.id)!=null?d:`headlessui-listbox-option-${Q()}`,e=K("ListboxOption"),p=O(null);L({el:p,$el:p});let u=m(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===f:!1),s=m(()=>B(e.mode.value,{0:()=>e.compare(w(e.value.value),w(t.value)),1:()=>w(e.value.value).some(a=>e.compare(w(a),w(t.value)))})),v=m(()=>B(e.mode.value,{1:()=>{var a;let o=w(e.value.value);return((a=e.options.value.find(i=>o.some(r=>e.compare(w(r),w(i.dataRef.value)))))==null?void 0:a.id)===f},0:()=>s.value})),l=ie(p),n=m(()=>({disabled:t.disabled,value:t.value,get textValue(){return l()},domRef:p}));H(()=>e.registerOption(f,n)),ue(()=>e.unregisterOption(f)),H(()=>{ee([e.listboxState,s],()=>{e.listboxState.value===0&&s.value&&B(e.mode.value,{1:()=>{v.value&&e.goToOption(h.Specific,f)},0:()=>{e.goToOption(h.Specific,f)}})},{immediate:!0})}),se(()=>{e.listboxState.value===0&&u.value&&e.activationTrigger.value!==0&&E(()=>{var a,o;return(o=(a=g(p))==null?void 0:a.scrollIntoView)==null?void 0:o.call(a,{block:"nearest"})})});function R(a){if(t.disabled)return a.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),E(()=>{var o;return(o=g(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})}))}function V(){if(t.disabled)return e.goToOption(h.Nothing);e.goToOption(h.Specific,f)}let S=re();function C(a){S.update(a)}function D(a){S.wasMoved(a)&&(t.disabled||u.value||e.goToOption(h.Specific,f,0))}function I(a){S.wasMoved(a)&&(t.disabled||u.value&&e.goToOption(h.Nothing))}return()=>{let{disabled:a}=t,o={active:u.value,selected:s.value,disabled:a},{value:i,disabled:r,...x}=t,A={id:f,ref:p,role:"option",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-selected":s.value,disabled:void 0,onClick:R,onFocus:V,onPointerenter:C,onMouseenter:C,onPointermove:D,onMousemove:D,onPointerleave:I,onMouseleave:I};return U({ourProps:A,theirProps:x,slot:o,attrs:y,slots:c,name:"ListboxOption"})}}});function $(t,c){return k(),j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[T("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}function Ee(t,c){return k(),j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[T("path",{"fill-rule":"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z","clip-rule":"evenodd"})])}const Me={class:"relative mt-2"},Fe={key:0,class:"block truncate"},_e={key:1,class:"block text-gray-500 truncate"},ze={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},Ke={__name:"CategoryPicker",props:{modelValue:Object,rootOnly:Boolean,showAllOption:Boolean},emits:["update:modelValue"],setup(t,{emit:c}){const y=t,L=c,d=O([]);return(async()=>{const e=await Se(y.rootOnly);d.value=e.data})(),(e,p)=>(k(),Z(P(Ie),{as:"div",modelValue:t.modelValue,"onUpdate:modelValue":p[0]||(p[0]=u=>L("update:modelValue",u)),by:"id"},{default:M(()=>[T("div",Me,[F(P(Ae),{class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-lime-600 sm:text-sm sm:leading-6"},{default:M(()=>[t.modelValue||t.showAllOption?(k(),j("span",Fe,Y(t.modelValue?t.modelValue.name:"Semua Kategori"),1)):(k(),j("span",_e,"Pilih Kategori")),T("span",ze,[F(P(Ee),{class:"w-5 h-5 text-gray-400","aria-hidden":"true"})])]),_:1}),F(ye,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:M(()=>[F(P(je),{class:"absolute z-10 w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:M(()=>[t.showAllOption?(k(),Z(P(J),{key:0,as:"template",value:null},{default:M(({active:u,selected:s})=>[T("li",{class:_([u?"bg-lime-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[T("span",{class:_([s?"font-semibold":"font-normal","block truncate"])},"Semua Kategori",2),s?(k(),j("span",{key:0,class:_([u?"text-white":"text-lime-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[F(P($),{class:"w-5 h-5","aria-hidden":"true"})],2)):q("",!0)],2)]),_:1})):q("",!0),(k(!0),j(te,null,Oe(d.value,u=>(k(),Z(P(J),{as:"template",key:u.id,value:u},{default:M(({active:s,selected:v})=>[T("li",{class:_([s?"bg-lime-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[T("span",{class:_([v?"font-semibold":"font-normal","block truncate"]),style:we("padding-left: "+.75*u.depth+"rem;")},Y(u.name),7),v?(k(),j("span",{key:0,class:_([s?"text-white":"text-lime-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[F(P($),{class:"w-5 h-5","aria-hidden":"true"})],2)):q("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}};export{je as A,J as F,Ie as I,Ke as _,$ as a,Ae as j,Ee as r};
